{{ define "main" }}
  {{ .Content }}
  {{ $calendar := partial "calendar/build-data.html" . }}
  {{ $months := index $calendar "months" }}
  {{ $defaultYear := index $calendar "defaultYear" }}
  {{ $defaultMonth := index $calendar "defaultMonth" }}
  {{ $defaultKey := index $calendar "defaultKey" }}
  {{ $defaultDay := index $calendar "defaultDay" }}
  {{ $defaultDayDate := "" }}
  {{ if $defaultDay }}
    {{ $defaultDayDate = index $defaultDay "date" }}
  {{ end }}
  {{ $minYear := index $calendar "minYear" }}
  {{ $minMonth := index $calendar "minMonth" }}
  {{ $maxYear := index $calendar "maxYear" }}
  {{ $maxMonth := index $calendar "maxMonth" }}

  {{ if gt (len $months) 0 }}
    <div
      data-calendar
      data-calendar-data='{{ $months | jsonify | safeJS }}'
      data-default-year="{{ $defaultYear }}"
      data-default-month="{{ $defaultMonth }}"
      data-default-key="{{ $defaultKey }}"
      {{ if ne $defaultDayDate "" }}data-default-day="{{ $defaultDayDate }}"{{ end }}
      data-min-year="{{ $minYear }}"
      data-min-month="{{ $minMonth }}"
      data-max-year="{{ $maxYear }}"
      data-max-month="{{ $maxMonth }}"
      class="mt-8 grid gap-10 lg:grid-cols-[minmax(0,360px)_1fr]"
    >
      <aside class="calendar-pane space-y-6 lg:sticky lg:top-6">
        <div data-calendar-container></div>
      </aside>
      <section class="article-pane flex">
        <div data-calendar-articles class="flex h-full w-full justify-center lg:justify-start">
          {{ if $defaultDay }}
            {{ partial "calendar/day-group.html" $defaultDay }}
          {{ else }}
            <div class="flex h-full w-full items-center justify-center rounded-2xl border border-dashed border-base-300 bg-base-200/60 px-4 py-5 text-sm text-neutral-600">
              暂无文章
            </div>
          {{ end }}
        </div>
      </section>
    </div>
    <noscript>
      <p class="mt-6 rounded-3xl border border-base-200 bg-base-100 p-4 text-sm text-neutral-500">
        启用 JavaScript 后可使用日历。
      </p>
    </noscript>
  {{ else }}
    <p class="mt-8 text-sm text-neutral-600">暂无文章。</p>
  {{ end }}
{{ end }}
